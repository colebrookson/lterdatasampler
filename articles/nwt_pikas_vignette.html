<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Niwot Ridge Pika Locations (NWT) • lterdatasampler</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Niwot Ridge Pika Locations (NWT)">
<meta property="og:description" content="lterdatasampler">
<meta property="og:image" content="https://lter.github.io/lterdatasampler/reference/figures/leaf.png">
<meta property="og:image:alt" content="lterdatasampler package in R">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@allison_horst">
<meta name="twitter:site" content="@allison_horst">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lterdatasampler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/and_vertebrates_vignette.html">Andrews Forest LTER Mack Creek cutthroat trout and salamanders (AND)</a>
    </li>
    <li>
      <a href="../articles/hbr_maples_vignette.html">Hubbard Brook Experimental Forest Sugar Maples (HBR)</a>
    </li>
    <li>
      <a href="../articles/knz_bison_vignette.html">Konza Prairie Bison Weights (KNZ)</a>
    </li>
    <li>
      <a href="../articles/ntl_icecover_vignette.html">North Temperate Lakes Ice Cover (NTL)</a>
    </li>
    <li>
      <a href="../articles/nwt_pikas_vignette.html">Niwot Ridge Pika Locations (NWT)</a>
    </li>
    <li>
      <a href="../articles/pie_crab_vignette.html">Plum Island Ecosystem LTER fiddler crabs (PIE)</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lter/lterdatasampler/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="nwt_pikas_vignette_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="nwt_pikas_vignette_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="nwt_pikas_vignette_files/jquery-1.12.4/jquery.min.js"></script><link href="nwt_pikas_vignette_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="nwt_pikas_vignette_files/leaflet-1.3.1/leaflet.js"></script><link href="nwt_pikas_vignette_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="nwt_pikas_vignette_files/proj4-2.6.2/proj4.min.js"></script><script src="nwt_pikas_vignette_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="nwt_pikas_vignette_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="nwt_pikas_vignette_files/leaflet-binding-2.0.4.1/leaflet.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Niwot Ridge Pika Locations (NWT)</h1>
            <h3 class="subtitle">American Pika Locations in Summer 2018 at Niwot Ridge LTER</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lter/lterdatasampler/blob/master/vignettes/nwt_pikas_vignette.Rmd"><code>vignettes/nwt_pikas_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>nwt_pikas_vignette.Rmd</code></div>

    </div>

    
    
<div id="dataset-sample-used" class="section level3">
<h3 class="hasAnchor">
<a href="#dataset-sample-used" class="anchor"></a>Dataset sample used</h3>
<ul>
<li><code>nwt_pikas</code></li>
</ul>
</div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>Researchers at the Niwot Ridge Long Term Ecological Research Site (NWT LTER) seek to study and monitor the health of the Colorado Rockies over time. Because of external factors like climate change, it’s more important than ever for scientists to understand how and why the Rockies are changing. Additionally, the well-being of the Rockies is crucial to local communities like Boulder, Colorado.</p>
<figure style="text-align:center;"><img src="../man/figures/nwt_pikas_img.jpg" width="40%" style="display:block; margin-left: auto; margin-right: auto;"><figcaption>
LTER researcher releasing a pika at the Niwot site, LTER CC BY-SA 4.0
</figcaption></figure><p><br></p>
<p>The American pika (Ochotona princeps) is a key species present at the NWT LTER. Despite their small size, pikas can be very informative about the health of the ecosystem. If pikas are more stressed, it can suggest that their habitat has declined in quality. As a result, the study of pikas is critical to the Colorado Rockies ecosystem.</p>
</div>
<div id="data-exploration" class="section level1">
<h1 class="hasAnchor">
<a href="#data-exploration" class="anchor"></a>Data Exploration</h1>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lter/lterdatasampler">lterdatasampler</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkahle/ggmap">ggmap</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/leaflet/">leaflet</a></span><span class="op">)</span></code></pre></div>
<p>Let’s explore some stress data about pikas:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nwt_pikas</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 8</span>
<span class="co">#&gt;   date       site       station  utm_easting utm_northing sex   concentration_p…</span>
<span class="co">#&gt;   &lt;date&gt;     &lt;fct&gt;      &lt;fct&gt;          &lt;dbl&gt;        &lt;dbl&gt; &lt;fct&gt;            &lt;dbl&gt;</span>
<span class="co">#&gt; 1 2018-06-08 Cable Gate Cable G…      451373      4432963 male            11563.</span>
<span class="co">#&gt; 2 2018-06-08 Cable Gate Cable G…      451411      4432985 male            10629.</span>
<span class="co">#&gt; 3 2018-06-08 Cable Gate Cable G…      451462      4432991 male            10924.</span>
<span class="co">#&gt; 4 2018-06-13 West Knoll West Kn…      449317      4434093 male            10414.</span>
<span class="co">#&gt; 5 2018-06-13 West Knoll West Kn…      449342      4434141 male            13531.</span>
<span class="co">#&gt; 6 2018-06-13 West Knoll West Kn…      449323      4434273 &lt;NA&gt;             7799.</span>
<span class="co">#&gt; # … with 1 more variable: elev_m &lt;dbl&gt;</span></code></pre></div>
<p>Not only do we have stress measurements, but the <code>utm_easting</code> and <code>utm_northing</code> columns also provide the geographic coordinates of the fecal pellet sampling stations where the pikas were found by researchers.</p>
<p>Geographical plotting can be helpful in our analyses. Generally speaking, it can offer a different perspective on our data and can also be easily understood by others. This is key; communicating results is an important part of data science.</p>
</div>
<div id="converting-to-simple-features" class="section level1">
<h1 class="hasAnchor">
<a href="#converting-to-simple-features" class="anchor"></a>Converting to Simple Features</h1>
<p>To leverage the geospatial features of our data, we can use the <a href="https://r-spatial.github.io/sf/index.html"><code>sf</code></a> package to transform the location information, currently stored in two columns, into information we can leverage for mapping and geospatial analysis. Using <code>sf</code>, we can represent our data as simple feature objects in R. As described in the <code>sf</code> package <a href="https://r-spatial.github.io/sf/articles/sf1.html">documentation</a>, simple features is a set of standards for describing how geographical data should be expressed digitally. This will allow us to use our data with various other geographical frameworks and standards, like mapping packages, GIS software, and GDAL, all of which use the simple features standard. You can work with simple features like lines and polygons, but we’ll be working with point data.</p>
<p>First, we need to convert our current coordinates into an <code>sf</code> object. We can use the <code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf()</a></code> function to do this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pikas_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">nwt_pikas</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"utm_easting"</span>, <span class="st">"utm_northing"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">pikas_sf</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">geometry</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Simple feature collection with 6 features and 0 fields</span>
<span class="co">#&gt; Geometry type: POINT</span>
<span class="co">#&gt; Dimension:     XY</span>
<span class="co">#&gt; Bounding box:  xmin: 449317 ymin: 4432963 xmax: 451462 ymax: 4434273</span>
<span class="co">#&gt; CRS:           NA</span>
<span class="co">#&gt; # A tibble: 6 × 1</span>
<span class="co">#&gt;           geometry</span>
<span class="co">#&gt;            &lt;POINT&gt;</span>
<span class="co">#&gt; 1 (451373 4432963)</span>
<span class="co">#&gt; 2 (451411 4432985)</span>
<span class="co">#&gt; 3 (451462 4432991)</span>
<span class="co">#&gt; 4 (449317 4434093)</span>
<span class="co">#&gt; 5 (449342 4434141)</span>
<span class="co">#&gt; 6 (449323 4434273)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs</a></span><span class="op">(</span><span class="va">pikas_sf</span><span class="op">)</span>
<span class="co">#&gt; Coordinate Reference System: NA</span></code></pre></div>
<div id="coordinate-reference-systems" class="section level2">
<h2 class="hasAnchor">
<a href="#coordinate-reference-systems" class="anchor"></a>Coordinate Reference Systems</h2>
<p>We now have a geometry column consisting of points instead of two separate columns for our coordinates. However, there is still no Coordinate Reference System (CRS) associated with our points. A Coordinate Reference System describes several things about your data: how the Earth’s 3D surface is represented in a 2D form (spatial projection), how the Earth’s shape is modeled (datum), the units, and the axes (<a href="https://www.earthdatascience.org/courses/earth-analytics/spatial-data-r/intro-to-coordinate-reference-systems/">here</a> for more).</p>
<p>From the data documentation (also known as metadata), which can be viewed by running <code><a href="../reference/nwt_pikas.html">?nwt_pikas</a></code>, we can see that our measurements use the Universal Transverse Mercator (UTM) system, are in Zone 13, and use the NAD83 datum. These all describe the CRS that our data uses.</p>
<p>We can set the coordinate reference system of the geometry column using <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_set_crs()</a></code>. This can be done in two ways. You can either use a string to describe the coordinate system using PROJ4 syntax:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pikas_sf</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_set_crs</a></span><span class="op">(</span><span class="va">pikas_sf</span>, <span class="st">"+proj=utm +zone=13 +datum=NAD83 +units=m"</span><span class="op">)</span></code></pre></div>
<p>Or you can use the equivalent EPSG code:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pikas_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_set_crs</a></span><span class="op">(</span><span class="va">pikas_sf</span>, <span class="fl">26913</span><span class="op">)</span></code></pre></div>
<p><a href="https://epsg.io">epsg.io</a> can help you find the appropriate PROJ4 syntax and EPSG code for the appropriate coordinate system.</p>
</div>
<div id="reprojecting-coordinates" class="section level2">
<h2 class="hasAnchor">
<a href="#reprojecting-coordinates" class="anchor"></a>Reprojecting Coordinates</h2>
<p>Online map tiles used as map background often use the WGS84 Web Mercator coordinate system (also used by the <a href="https://en.wikipedia.org/wiki/Global_Positioning_System">GPS system</a>), which uses a geographic coordinate system (latitude and longitude). After setting our CRS, we can reproject our data to the WGS84 CRS using <code><a href="https://r-spatial.github.io/sf/reference/st_transform.html">st_transform()</a></code> so that it’s more compatible with third-party maps, which will give us more ways to represent our data:</p>
<p>PROJ4 Syntax:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pikas_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html">st_transform</a></span><span class="op">(</span><span class="va">pikas_sf</span>, <span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span></code></pre></div>
<p>EPSG Code:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pikas_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html">st_transform</a></span><span class="op">(</span><span class="va">pikas_sf</span>, <span class="fl">4326</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="plotting-points" class="section level1">
<h1 class="hasAnchor">
<a href="#plotting-points" class="anchor"></a>Plotting Points</h1>
<p>Now, we can plot our new data using <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pika_points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pikas_sf</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">site</span>, shape <span class="op">=</span> <span class="va">site</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Location of Pika Sampling Stations"</span>, subtitle <span class="op">=</span> <span class="st">"Niwot Ridge LTER"</span>, x <span class="op">=</span> <span class="st">"Latitude (Degrees)"</span>, y <span class="op">=</span> <span class="st">"Longitude (Degrees)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="co"># Tilts x-axis text so that the labels don't overlap</span>

<span class="va">pika_points</span></code></pre></div>
<p><img src="nwt_pikas_vignette_files/figure-html/geom_sf-1.png" width="672"></p>
<p>Because we reprojected our data, we can now plot our data onto geographic maps.</p>
</div>
<div id="incorporating-online-basemaps" class="section level1">
<h1 class="hasAnchor">
<a href="#incorporating-online-basemaps" class="anchor"></a>Incorporating Online Basemaps</h1>
<p>Although it’s cool to see these plots, we still don’t have much geographical context for our data points, as we don’t know the finer details of the area. One way we can add this to our plots is through the use of the <a href="https://github.com/dkahle/ggmap"><code>ggmap</code></a> package. <code>ggmap</code> allows us to plot static maps from places like <a href="https://www.google.com/maps/">Google Maps</a> and <a href="http://maps.stamen.com/#terrain/12/37.7706/-122.3782">Stamen Maps</a>. <code>ggmap</code> is also easy to use in conjunction with <code>ggplot2</code>, making it possible to combine our plots from earlier with any maps produced with <code>ggmap</code>. Dr. Melanie Frazier at NCEAS has produced a <a href="https://www.nceas.ucsb.edu/sites/default/files/2020-04/ggmapCheatsheet.pdf">quick start guide</a> for <code>ggmap</code> that can help you begin.</p>
<div id="ggmap-terrain-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#ggmap-terrain-maps" class="anchor"></a><code>ggmap</code> Terrain Maps</h2>
<p>First, let’s try to plot the general area surrounding the Niwot Ridge LTER. We’ll use Stamen Maps since Google Maps requires users to register with Google to use their API. We need to create a bounding box consisting of the coordinates of the region that we would like to plot. This takes some trial and error, but <a href="https://www.openstreetmap.org/export">OpenStreetMap</a> can help you obtain the coordinates that you need.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nwt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>left <span class="op">=</span> <span class="op">-</span><span class="fl">106</span>, bottom <span class="op">=</span> <span class="fl">39.8433</span>, right <span class="op">=</span> <span class="op">-</span><span class="fl">105</span>, top <span class="op">=</span> <span class="fl">40.2339</span><span class="op">)</span></code></pre></div>
<p>Next, we can use <code><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap()</a></code> and <code><a href="https://rdrr.io/pkg/ggmap/man/get_stamenmap.html">get_stamenmap()</a></code> to plot our map. <code><a href="https://rdrr.io/pkg/ggmap/man/get_stamenmap.html">get_stamenmap()</a></code> creates a ggmap raster object and is similar to the <code>get_map(source = "stamen")</code> function in the NCEAS quick start guide above. <code><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap()</a></code> will plot this ggmap raster object. We can specify the <code>bbox</code> argument as the <code>nwt</code> variable we defined earlier. The <code>zoom</code> argument determines the scale of the map, and will also take some trial and error to get right.</p>
<p>Now we can combine our <code><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap()</a></code> and our <code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf()</a></code> plots:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">combined_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_stamenmap.html">get_stamenmap</a></span><span class="op">(</span><span class="va">nwt</span>, zoom <span class="op">=</span> <span class="fl">10</span>, maptype <span class="op">=</span> <span class="st">"terrain"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pikas_sf</span>, inherit.aes <span class="op">=</span> <span class="cn">FALSE</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">site</span>, shape <span class="op">=</span> <span class="va">site</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Location of Pika Sampling Stations"</span>, subtitle <span class="op">=</span> <span class="st">"Niwot Ridge LTER"</span>, x <span class="op">=</span> <span class="st">"Longitude (Degrees)"</span>, y <span class="op">=</span> <span class="st">"Latitude (Degrees)"</span><span class="op">)</span> <span class="op">+</span>
   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>,<span class="st">"red"</span>,<span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Choosing colors to make sure points are visible</span>

<span class="va">combined_map</span></code></pre></div>
<p><img src="nwt_pikas_vignette_files/figure-html/combined_map-1.png" width="672"></p>
<p>Finally, adjust the bounding box and zoom to get a better look:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pikas_location</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>left <span class="op">=</span> <span class="op">-</span><span class="fl">105.65</span>, bottom <span class="op">=</span> <span class="fl">40.04</span>, right <span class="op">=</span> <span class="op">-</span><span class="fl">105.55</span>, top <span class="op">=</span> <span class="fl">40.1</span><span class="op">)</span>
<span class="va">pikas_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html">ggmap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_stamenmap.html">get_stamenmap</a></span><span class="op">(</span><span class="va">pikas_location</span>, zoom <span class="op">=</span> <span class="fl">13</span>, maptype <span class="op">=</span> <span class="st">"terrain"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
 <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pikas_sf</span>, inherit.aes <span class="op">=</span> <span class="cn">FALSE</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">site</span>, shape <span class="op">=</span> <span class="va">site</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Location of Pika Sampling Stations"</span>, subtitle <span class="op">=</span> <span class="st">"Niwot Ridge LTER"</span>, x <span class="op">=</span> <span class="st">"Longitude (Degrees)"</span>, y <span class="op">=</span> <span class="st">"Latitude (Degrees)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"black"</span>,<span class="st">"red"</span>,<span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Choosing colors to make sure points are visible</span>

<span class="va">pikas_map</span></code></pre></div>
<p><img src="nwt_pikas_vignette_files/figure-html/zoom-1.png" width="672"></p>
<p>Now we have a unified plot consisting of our data and a terrain map!</p>
</div>
<div id="interactive-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#interactive-maps" class="anchor"></a>Interactive maps</h2>
<p>You can also use the <code>leaflet</code> package to produce interactive maps:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html">leaflet</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addTiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addCircles</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">pikas_sf</span>, label <span class="op">=</span> <span class="op">~</span><span class="va">station</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-b3fcca1b4c5125c595e0" style="width:672px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-b3fcca1b4c5125c595e0">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircles","args":[[40.0455005946612,40.0457009896597,40.0457579828779,40.0555599523312,40.0559938983516,40.0571819744062,40.0561230806813,40.0568155865201,40.0573483958231,40.0565402167651,40.058671686916,40.0595218148983,40.0688580016368,40.0684234185393,40.0693147960073,40.0561142521124,40.058208286621,40.0480370024965,40.0455276225162,40.0457489160232,40.0553447313224,40.0559311304211,40.0555328645062,40.0571819744062,40.0561142521124,40.0573664142759,40.0567661666364,40.058172189238,40.0586718077615,40.0595307637568,40.0553356008104,40.055931069968,40.0571640762052,40.0561320899096,40.0568335447263,40.0573485162668,40.0567751758648,40.0565673044498,40.0581543522949,40.059539893701,40.0455730726236,40.0457099989451,40.0480372320608,40.0553357220997,40.0559490884176,40.05554193387,40.0560296347386,40.0571817940141,40.056114131674,40.0568156467663,40.0573753030538,40.0567841249372,40.0565582952184,40.0581632405179,40.0586716264914,40.0595128660386,40.0455730726236,40.0457099989451,40.0457399643054,40.0689473805207,40.0684142308771,40.069279116053,40.0553357220997,40.0559490884176,40.05554193387,40.0560296347386,40.0571817940141,40.056114131674,40.0568156467663,40.0573753030538,40.0567841249372,40.0565582952184,40.0581632405179,40.0586716264914,40.0595128660386,40.0553357220997,40.0559490884176,40.05554193387,40.0571817940141,40.056114131674,40.0568156467663,40.0573753030538,40.0567841249372,40.0565582952184,40.0581632405179,40.0586716264914,40.0595128660386,40.0455730726236,40.0457099989451,40.0457399643054,40.0480372320608,40.0689473805207,40.0684142308771,40.069279116053,40.0455730726236,40.0457099989451,40.0457399643054,40.0480372320608,40.0553357220997,40.0559490884176,40.05554193387,40.0571817940141,40.056114131674,40.0568156467663,40.0573753030538,40.0567841249372,40.0565582952184,40.0581632405179,40.0586716264914],[-105.570048542407,-105.569604743325,-105.569007351908,-105.594237990193,-105.593948644335,-105.594181730514,-105.595110503738,-105.595351022643,-105.595109437936,-105.592827816481,-105.597079035002,-105.596453294179,-105.587200179199,-105.587618609989,-105.587731811756,-105.595075253071,-105.597837114132,-105.567256090415,-105.570048767529,-105.569018999382,-105.599289376353,-105.597395129354,-105.594249479437,-105.594181730514,-105.595075253071,-105.59510959468,-105.594447787967,-105.597848523643,-105.597055585934,-105.596465097416,-105.59931274535,-105.597406853417,-105.594158125452,-105.595110582107,-105.595362903671,-105.595085989314,-105.594447866251,-105.592816326508,-105.597813192843,-105.596441726606,-105.569967086312,-105.569604818308,-105.567209199321,-105.599289297436,-105.597407010759,-105.594237833688,-105.594007577634,-105.594216903367,-105.595098701269,-105.595339298424,-105.595133121683,-105.59445966875,-105.592816248439,-105.597836720463,-105.597090759535,-105.596441490944,-105.569967086312,-105.569604818308,-105.5690072021,-105.587341668614,-105.587653711244,-105.587661143792,-105.599289297436,-105.597407010759,-105.594237833688,-105.594007577634,-105.594216903367,-105.595098701269,-105.595339298424,-105.595133121683,-105.59445966875,-105.592816248439,-105.597836720463,-105.597090759535,-105.596441490944,-105.599289297436,-105.597407010759,-105.594237833688,-105.594216903367,-105.595098701269,-105.595339298424,-105.595133121683,-105.59445966875,-105.592816248439,-105.597836720463,-105.597090759535,-105.596441490944,-105.569967086312,-105.569604818308,-105.5690072021,-105.567209199321,-105.587341668614,-105.587653711244,-105.587661143792,-105.569967086312,-105.569604818308,-105.5690072021,-105.567209199321,-105.599289297436,-105.597407010759,-105.594237833688,-105.594216903367,-105.595098701269,-105.595339298424,-105.595133121683,-105.59445966875,-105.592816248439,-105.597836720463,-105.597090759535],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,["Cable Gate 1","Cable Gate 2","Cable Gate 3","West Knoll 3","West Knoll 4","West Knoll 5","West Knoll 6","West Knoll 7","West Knoll 8","West Knoll 10","West Knoll 12","West Knoll 13","Long Lake 1","Long Lake 2","Long Lake 3","West Knoll 6","West Knoll 11","Cable Gate 4","Cable Gate 1","Cable Gate 3","West Knoll 1","West Knoll 2","West Knoll 3","West Knoll 5","West Knoll 6","West Knoll 8","West Knoll 9","West Knoll 11","West Knoll 12","West Knoll 13","West Knoll 1","West Knoll 2","West Knoll 5","West Knoll 6","West Knoll 7","West Knoll 8","West Knoll 9","West Knoll 10","West Knoll 11","West Knoll 13","Cable Gate 1","Cable Gate 2","Cable Gate 4","West Knoll 1","West Knoll 2","West Knoll 3","West Knoll 4","West Knoll 5","West Knoll 6","West Knoll 7","West Knoll 8","West Knoll 9","West Knoll 10","West Knoll 11","West Knoll 12","West Knoll 13","Cable Gate 1","Cable Gate 2","Cable Gate 3","Long Lake 1","Long Lake 2","Long Lake 3","West Knoll 1","West Knoll 2","West Knoll 3","West Knoll 4","West Knoll 5","West Knoll 6","West Knoll 7","West Knoll 8","West Knoll 9","West Knoll 10","West Knoll 11","West Knoll 12","West Knoll 13","West Knoll 1","West Knoll 2","West Knoll 3","West Knoll 5","West Knoll 6","West Knoll 7","West Knoll 8","West Knoll 9","West Knoll 10","West Knoll 11","West Knoll 12","West Knoll 13","Cable Gate 1","Cable Gate 2","Cable Gate 3","Cable Gate 4","Long Lake 1","Long Lake 2","Long Lake 3","Cable Gate 1","Cable Gate 2","Cable Gate 3","Cable Gate 4","West Knoll 1","West Knoll 2","West Knoll 3","West Knoll 5","West Knoll 6","West Knoll 7","West Knoll 8","West Knoll 9","West Knoll 10","West Knoll 11","West Knoll 12"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null,null]}],"limits":{"lat":[40.0455005946612,40.0693147960073],"lng":[-105.59931274535,-105.567209199321]}},"evals":[],"jsHooks":[]}</script><p>You can learn more about the <code>leaflet</code> package <a href="https://rstudio.github.io/leaflet/">here</a>. There is also a cheat sheet available <a href="https://github.com/rstudio/cheatsheets/blob/master/leaflet.pdf">here</a>.</p>
</div>
</div>
<div id="learn-more" class="section level1">
<h1 class="hasAnchor">
<a href="#learn-more" class="anchor"></a>Learn more</h1>
<p>Want to learn more about how iconic species, such as Pikas, help to create enthusiasm around citizen science? Read this story: <a href="https://lternet.edu/stories/pika-enthusiasts-unite-under-a-common-theme/" class="uri">https://lternet.edu/stories/pika-enthusiasts-unite-under-a-common-theme/</a></p>
</div>
<div id="citation" class="section level1">
<h1 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h1>
<p>Whipple, A. and Niwot Ridge LTER. 2020. Physiological stress of American pika (Ochotona princeps) and associated habitat characteristics for Niwot Ridge, 2018 - 2019 ver 1. Environmental Data Initiative. <a href="https://doi.org/10.6073/pasta/9f95baf55f98732f47a8844821ff690d" class="uri">https://doi.org/10.6073/pasta/9f95baf55f98732f47a8844821ff690d</a> (Accessed 2021-05-06).</p>
</div>
<div id="how-we-processed-the-raw-data" class="section level1">
<h1 class="hasAnchor">
<a href="#how-we-processed-the-raw-data" class="anchor"></a>How we processed the raw data</h1>
<div id="download-the-raw-data-from-edi-org" class="section level3">
<h3 class="hasAnchor">
<a href="#download-the-raw-data-from-edi-org" class="anchor"></a>Download the raw data from EDI.org</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nceas/metajam">metajam</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sfirke/janitor">janitor</a></span><span class="op">)</span>

<span class="co"># Physiological stress of American pika (Ochotona princeps) and associated habitat characteristics for Niwot Ridge, 2018 - 2019</span>
<span class="co"># Main URL: https://doi.org/10.6073/pasta/9f95baf55f98732f47a8844821ff690d</span>

<span class="co"># Stress and coordinate data</span>
<span class="va">nwt_url</span> <span class="op">&lt;-</span>
  <span class="st">"https://portal.edirepository.org/nis/dataviewer?packageid=knb-lter-nwt.268.1&amp;entityid=43270add3532c7f3716404576cfb3f2c"</span>

<span class="co"># Elevation Data</span>
<span class="va">elevation_url</span> <span class="op">&lt;-</span>
  <span class="st">"https://portal.edirepository.org/nis/dataviewer?packageid=knb-lter-nwt.268.1&amp;entityid=6a10b35988119d0462837f9bfa31dd2f"</span>

<span class="co"># Download the data packages with metajam</span>
<span class="va">nwt_download</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/metajam/man/download_d1_data.html">download_d1_data</a></span><span class="op">(</span>data_url <span class="op">=</span> <span class="va">nwt_url</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="va">elevation_download</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/pkg/metajam/man/download_d1_data.html">download_d1_data</a></span><span class="op">(</span>data_url <span class="op">=</span> <span class="va">elevation_url</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="data-cleaning" class="section level3">
<h3 class="hasAnchor">
<a href="#data-cleaning" class="anchor"></a>Data cleaning</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Read in stress and coordinate data</span>
<span class="va">nwt_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metajam/man/read_d1_files.html">read_d1_files</a></span><span class="op">(</span><span class="va">nwt_download</span><span class="op">)</span>
<span class="va">nwt_pikas_raw</span> <span class="op">&lt;-</span> <span class="va">nwt_files</span><span class="op">$</span><span class="va">data</span>

<span class="co"># Drop unneeded variables, convert data types, spell out abbreviations, and reorder variables</span>
<span class="va">nwt_pikas</span> <span class="op">&lt;-</span> <span class="va">nwt_pikas_raw</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Notes</span>,<span class="op">-</span><span class="va">Vial</span>,<span class="op">-</span><span class="va">Plate</span>,<span class="op">-</span><span class="va">Biweek</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    Station <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Station</span><span class="op">)</span>,
    Site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Site</span><span class="op">)</span>,
    Sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Sex</span><span class="op">)</span>,
    Date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">Date</span><span class="op">)</span>,
    Site <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span>
      <span class="va">Site</span>,
      <span class="st">"WK"</span> <span class="op">=</span> <span class="st">"West Knoll"</span>,
      <span class="st">"LL"</span> <span class="op">=</span> <span class="st">"Long Lake"</span>,
      <span class="st">"ML"</span> <span class="op">=</span> <span class="st">"Mitchell Lake"</span>,
      <span class="st">"CG"</span> <span class="op">=</span> <span class="st">"Cable Gate"</span>
    <span class="op">)</span>,
    Sex <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span><span class="va">Sex</span>,
                 <span class="st">"U"</span> <span class="op">=</span> <span class="cn">NA_character_</span>,
                 <span class="st">"M"</span> <span class="op">=</span> <span class="st">"male"</span><span class="op">)</span>,
    Station <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span>
      <span class="va">Station</span>,
      <span class="st">"CG1"</span> <span class="op">=</span> <span class="st">"Cable Gate 1"</span>,
      <span class="st">"CG2"</span> <span class="op">=</span> <span class="st">"Cable Gate 2"</span>,
      <span class="st">"CG3"</span> <span class="op">=</span> <span class="st">"Cable Gate 3"</span>,
      <span class="st">"CG4"</span> <span class="op">=</span> <span class="st">"Cable Gate 4"</span>,
      <span class="st">"LL1"</span> <span class="op">=</span> <span class="st">"Long Lake 1"</span>,
      <span class="st">"LL2"</span> <span class="op">=</span> <span class="st">"Long Lake 2"</span>,
      <span class="st">"LL3"</span> <span class="op">=</span> <span class="st">"Long Lake 3"</span>,
      <span class="st">"WK1"</span> <span class="op">=</span> <span class="st">"West Knoll 1"</span>,
      <span class="st">"WK2"</span> <span class="op">=</span> <span class="st">"West Knoll 2"</span>,
      <span class="st">"WK3"</span> <span class="op">=</span> <span class="st">"West Knoll 3"</span>,
      <span class="st">"WK4"</span> <span class="op">=</span> <span class="st">"West Knoll 4"</span>,
      <span class="st">"WK5"</span> <span class="op">=</span> <span class="st">"West Knoll 5"</span>,
      <span class="st">"WK6"</span> <span class="op">=</span> <span class="st">"West Knoll 6"</span>,
      <span class="st">"WK7"</span> <span class="op">=</span> <span class="st">"West Knoll 7"</span>,
      <span class="st">"WK8"</span> <span class="op">=</span> <span class="st">"West Knoll 8"</span>,
      <span class="st">"WK9"</span> <span class="op">=</span> <span class="st">"West Knoll 9"</span>,
      <span class="st">"WK10"</span> <span class="op">=</span> <span class="st">"West Knoll 10"</span>,
      <span class="st">"WK11"</span> <span class="op">=</span> <span class="st">"West Knoll 11"</span>,
      <span class="st">"WK12"</span> <span class="op">=</span> <span class="st">"West Knoll 12"</span>,
      <span class="st">"WK13"</span> <span class="op">=</span> <span class="st">"West Knoll 13"</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">Site</span>, .before <span class="op">=</span> <span class="va">Station</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">Sex</span>, .before <span class="op">=</span> <span class="va">Concentration_pg_g</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Read in elevation data</span>
<span class="va">elevation_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/metajam/man/read_d1_files.html">read_d1_files</a></span><span class="op">(</span><span class="va">elevation_download</span><span class="op">)</span>
<span class="va">elevation_raw</span> <span class="op">&lt;-</span> <span class="va">elevation_files</span><span class="op">$</span><span class="va">data</span>

<span class="co"># Select needed variables, spell out abbreviations, and convert Station to factor</span>
<span class="va">elevation</span> <span class="op">&lt;-</span> <span class="va">elevation_raw</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Station</span>, <span class="va">Elev_M</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
    Station <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span>
      <span class="va">Station</span>,
      <span class="st">"CG1"</span> <span class="op">=</span> <span class="st">"Cable Gate 1"</span>,
      <span class="st">"CG2"</span> <span class="op">=</span> <span class="st">"Cable Gate 2"</span>,
      <span class="st">"CG3"</span> <span class="op">=</span> <span class="st">"Cable Gate 3"</span>,
      <span class="st">"CG4"</span> <span class="op">=</span> <span class="st">"Cable Gate 4"</span>,
      <span class="st">"LL1"</span> <span class="op">=</span> <span class="st">"Long Lake 1"</span>,
      <span class="st">"LL2"</span> <span class="op">=</span> <span class="st">"Long Lake 2"</span>,
      <span class="st">"LL3"</span> <span class="op">=</span> <span class="st">"Long Lake 3"</span>,
      <span class="st">"WK1"</span> <span class="op">=</span> <span class="st">"West Knoll 1"</span>,
      <span class="st">"WK2"</span> <span class="op">=</span> <span class="st">"West Knoll 2"</span>,
      <span class="st">"WK3"</span> <span class="op">=</span> <span class="st">"West Knoll 3"</span>,
      <span class="st">"WK4"</span> <span class="op">=</span> <span class="st">"West Knoll 4"</span>,
      <span class="st">"WK5"</span> <span class="op">=</span> <span class="st">"West Knoll 5"</span>,
      <span class="st">"WK6"</span> <span class="op">=</span> <span class="st">"West Knoll 6"</span>,
      <span class="st">"WK7"</span> <span class="op">=</span> <span class="st">"West Knoll 7"</span>,
      <span class="st">"WK8"</span> <span class="op">=</span> <span class="st">"West Knoll 8"</span>,
      <span class="st">"WK9"</span> <span class="op">=</span> <span class="st">"West Knoll 9"</span>,
      <span class="st">"WK10"</span> <span class="op">=</span> <span class="st">"West Knoll 10"</span>,
      <span class="st">"WK11"</span> <span class="op">=</span> <span class="st">"West Knoll 11"</span>,
      <span class="st">"WK12"</span> <span class="op">=</span> <span class="st">"West Knoll 12"</span>,
      <span class="st">"WK13"</span> <span class="op">=</span> <span class="st">"West Knoll 13"</span>
    <span class="op">)</span>,
    Station <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">Station</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Combine elevation data with stress and coordinate data</span>
<span class="va">nwt_pikas</span> <span class="op">&lt;-</span> <span class="va">nwt_pikas</span> <span class="op"><a href="https://rdrr.io/pkg/janitor/man/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">elevation</span>, by <span class="op">=</span> <span class="st">"station"</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.allisonhorst.com/">Allison Horst</a>, <a href="https://brunj7.github.io/">Julien Brun</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
